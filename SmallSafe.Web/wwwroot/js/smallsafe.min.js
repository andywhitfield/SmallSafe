function ssInitialise(){let n=$(window).width();$(window).on("resize",function(){let t=$(window).width();Math.abs(t-n)<2||(n=t,$("aside").css("display",""),$(".nav-close:visible").length>0&&($(".nav-close").css("display",""),$(".nav-show").css("display","")))});$(".nav-show").click(function(){$("aside").fadeToggle("fast");$(this).hide();$(".nav-close").show()});$(".nav-close").click(function(){$("aside").hide();$(this).hide();$(".nav-show").show()});$("[data-href]").click(function(n){return window.location.href=$(this).attr("data-href"),n.preventDefault(),!1});$("form[data-confirm]").submit(function(n){if(!confirm($(this).attr("data-confirm")))return n.preventDefault(),!1});$("button[data-clipboard]").click(function(){ssCopyToClipboard($(this).attr("data-clipboard"))});$('form[name="generatepassword"]').submit(function(n){return $.getJSON("/api/generatepassword?genpwmin="+$('form[name="generatepassword"] input[name="genpwmin"]').val()+"&genpwmax="+$('form[name="generatepassword"] input[name="genpwmax"]').val()+"&genpwnums="+($('form[name="generatepassword"] input[name="genpwnums"]').is(":checked")?"true":"false")+"&genpwallchars="+($('form[name="generatepassword"] input[name="genpwallchars"]').is(":checked")?"true":"false")+"").done(function(n){$(".generated-passwords").empty();n.forEach(n=>{let t=$(".generated-passwords").append('<div><button title="Copy password to the clipboard"><img src="/images/copy.png" height="15" width="15" /><\/button> <input type="text" /><\/div>');$("div:last button",t).attr("data-clipboard",n);$("div:last input",t).val(n)});$(".generated-passwords button[data-clipboard]").click(function(){ssCopyToClipboard($(this).attr("data-clipboard"))})}).fail(function(){$(".generated-passwords").empty();$(".generated-passwords").append("<div>Sorry, could not generate passwords. Please try again later.<\/div>")}),n.preventDefault(),!1});$("ul.ss-list").sortable({handle:".ss-list-item-drag-handle",isValidTarget:function(n,t){return t.el[0].className.includes("ss-list-item")},onDrop:function(n,t,i,r){i(n,t,r);let u=n.attr("data-group"),f=n.attr("data-entry");if(typeof u!="undefined"&&typeof f!="undefined"){let t=n.prev("li").attr("data-entry");console.log("moving group/entry "+u+"/"+f+" to be after "+t);typeof t=="undefined"&&(t=null);console.log("moving group "+u+" entry "+f+" to be after "+t);$.post("/api/group/"+u+"/entry/"+f+"/move",{prevEntryId:t}).done(function(){console.log("entry move successful")}).fail(function(){window.location.reload()})}else if(typeof u!="undefined"){let t=n.prev("li").attr("data-group");typeof t=="undefined"&&(t=null);console.log("moving group "+u+" to be after "+t);$.post("/api/group/"+u+"/move",{prevGroupId:t}).done(function(){console.log("group move successful")}).fail(function(){window.location.reload()})}}})}function ssInitialiseSafeEntry(){$(".ss-visible-value").hide();$("button.ss-hidden-value:first-child").click(function(){let n=$(this).parentsUntil("li.ss-list-item").parent(),t=n.attr("data-group"),i=n.attr("data-entry");$.getJSON("/api/group/"+t+"/entry/"+i).done(function(t){$("textarea",n).val(t.value);$(".ss-hidden-value",n).hide();$(".ss-visible-value",n).show()}).fail(function(){window.location.reload()})});$("button.ss-hidden-value:nth-last-child(2)").click(function(){let n=$(this).parentsUntil("li.ss-list-item").parent(),t=n.attr("data-group"),i=n.attr("data-entry");$.getJSON("/api/group/"+t+"/entry/"+i).done(function(t){$("textarea",n).val(t.value);$("button.ss-hidden-value:nth-last-child(2)",n).hide();$("button.ss-visible-value:last-child",n).show()}).fail(function(){window.location.reload()})});$("button.ss-visible-value:nth-child(2)").click(function(){let n=$(this).parentsUntil("li.ss-list-item");$(".ss-visible-value",n).hide();$("textarea",n).val("");$(".ss-hidden-value",n).show()});$("button.ss-visible-value:last-child").click(function(){let n=$(this).parentsUntil("li.ss-list-item");ssCopyToClipboard($("textarea",n).val());$(".ss-visible-value",n).hide();$("textarea",n).val("");$(".ss-hidden-value",n).show()})}function ssCopyToClipboard(n){navigator.clipboard?navigator.clipboard.writeText(n):ssFallbackCopyToClipboard(n)}function ssFallbackCopyToClipboard(n){let t=document.createElement("textarea");t.value=n;t.style.top="0";t.style.left="0";t.style.position="fixed";document.body.appendChild(t);t.focus();t.select();try{document.execCommand("copy")}catch(i){console.error("Unable to copy",i)}document.body.removeChild(t)}